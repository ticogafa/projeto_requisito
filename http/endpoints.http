# Barbearia API - Endpoints Completos
# Este arquivo contém todos os endpoints organizados por funcionalidade

### Variables
@baseUrl = http://localhost:8080/api

### ============================================================
### SERVIÇOS
### ============================================================

### Criar Serviço
POST {{baseUrl}}/servicos
Content-Type: application/json

{
  "nome": "Corte Masculino",
  "descricao": "Corte de cabelo masculino tradicional",
  "preco": 25.00,
  "duracaoMinutos": 30
}

### Criar outro Serviço
POST {{baseUrl}}/servicos
Content-Type: application/json

{
  "nome": "Barba Completa",
  "descricao": "Barba completa com toalha quente",
  "preco": 15.00,
  "duracaoMinutos": 20
}

### Buscar Serviço por ID
GET {{baseUrl}}/servicos/1

### Listar Serviços
GET {{baseUrl}}/servicos

### Atualizar Serviço
PUT {{baseUrl}}/servicos/1
Content-Type: application/json

{
  "id": 1,
  "descricao": "Corte de cabelo masculino premium",
  "nome": "Corte Masculino Premium",
  "preco": 35.00,
  "duracaoMinutos": 45
}

### Deletar Serviço
DELETE {{baseUrl}}/servicos/1

### ============================================================
### PROFISSIONAIS
### ============================================================

### Criar Profissional
POST {{baseUrl}}/profissionais
Content-Type: application/json

{
  "nome": "Carlos Silva",
  "email": "carlos.silva@barbearia.com",
  "cpf": "53604042801",
  "telefone": "0000000000"
}

### Buscar Profissional por ID
GET {{baseUrl}}/profissionais/1

### Listar Profissionais
GET {{baseUrl}}/profissionais

### Atualizar Profissional
PUT {{baseUrl}}/profissionais/1
Content-Type: application/json

{
  "id": 1,
  "nome": "Carlos Silva Junior",
  "email": "carlos.junior@barbearia.com",
  "cpf": "123.456.789-01",
  "telefone": "(11) 91234-5678"
}

### Deletar Profissional
DELETE {{baseUrl}}/profissionais/1

### ============================================================
### HORÁRIOS DE TRABALHO
### ============================================================

### Criar Horário de Trabalho
POST {{baseUrl}}/profissionais/1/horarios
Content-Type: application/json

{
  "diaSemana": "SEGUNDA",
  "horaInicio": "08:00",
  "inicioPausa": "12:00",
  "horaFim": "18:00",
  "fimPausa": "13:00"
}

### Listar Horários do Profissional
GET {{baseUrl}}/profissionais/1/horarios

### Atualizar Horário de Trabalho
PUT {{baseUrl}}/profissionais/1/horarios/1
Content-Type: application/json

{
  "diaSemana": "SEGUNDA",
  "horaInicio": "07:30",
  "horaFim": "17:30",
  "inicioPausa": "12:00",
  "fimPausa": "13:00"
}

### ============================================================
### CLIENTES
### ============================================================

### Criar Cliente
POST {{baseUrl}}/clientes
Content-Type: application/json

{
  "nome": "Maria Silva",
  "email": "maria.silva2@email.com",
  "cpf": "53604042801",
  "telefone": "9211886888"
}

POST {{baseUrl}}/clientes
Content-Type: application/json
{
  "nome": "Maria Silva",
  "email": "maria.silva@email.com",
  "cpf": "12345678900",
  "telefone": "9311886888"
}

### Buscar Cliente por ID
GET {{baseUrl}}/clientes/1

### Listar Clientes
GET {{baseUrl}}/clientes

### Atualizar Cliente
PUT {{baseUrl}}/clientes/1
Content-Type: application/json

{
  "nome": "Maria Silva Santos",
  "email": "maria.santos@email.com",
  "cpf": "111.222.333-44",
  "telefone": "(11) 99999-1111"
}

### Deletar Cliente
DELETE {{baseUrl}}/clientes/1

### Adicionar Pontos de Fidelidade
POST {{baseUrl}}/clientes/1/pontos/adicionar/50

### Usar Pontos de Fidelidade
POST {{baseUrl}}/clientes/1/pontos/usar/25

### ============================================================
### AGENDAMENTOS
### ============================================================

### Criar Agendamento
POST {{baseUrl}}/agendamentos/criar-agendamento
Content-Type: application/json

{
  "dataHora": "2025-09-22T14:30:00",
  "clienteId": "1",
  "profissionalId": "1",
  "servicoId": "1",
  "observacoes": "Cliente prefere corte social"
}

### Criar segundo Agendamento
POST {{baseUrl}}/agendamentos/criar-agendamento
Content-Type: application/json

{
  "dataHora": "2025-09-22T15:00:00",
  "clienteId": "2",
  "profissionalId": "2",
  "servicoId": "2",
  "observacoes": "Cliente regular"
}

### Criar terceiro Agendamento
POST {{baseUrl}}/agendamentos/criar-agendamento
Content-Type: application/json

{
  "dataHora": "2025-09-22T16:30:00",
  "clienteId": "1",
  "profissionalId": "1",
  "servicoId": "2",
  "observacoes": "Agendamento adicional"
}

### Buscar Agendamento por ID (ID = 1)
GET {{baseUrl}}/agendamentos/1

### Listar Todos os Agendamentos
GET {{baseUrl}}/agendamentos

### Buscar Agendamento por ID (ID = 2)
GET {{baseUrl}}/agendamentos/2

### Buscar Agendamento por ID (ID = 3)
GET {{baseUrl}}/agendamentos/3

### Confirmar Agendamento (ID = 1)
PATCH {{baseUrl}}/agendamentos/confirmar-agendamento/1

### Confirmar Agendamento (ID = 2)
PATCH {{baseUrl}}/agendamentos/confirmar-agendamento/2

### Cancelar Agendamento (ID = 3)
PATCH {{baseUrl}}/agendamentos/cancelar-agendamento/3

### ============================================================
### HORÁRIOS DISPONÍVEIS - Novos Endpoints
### ============================================================

### Listar horários disponíveis para Serviço 1 em 22/09/2025
GET {{baseUrl}}/agendamentos/horarios-disponiveis?data=2025-09-20&servicoOferecidoId=1

### Listar horários disponíveis para Serviço 2 em 22/09/2025
GET {{baseUrl}}/agendamentos/horarios-disponiveis?data=2025-09-20&servicoOferecidoId=1

### Listar horários disponíveis para Serviço 1 em 23/09/2025
GET {{baseUrl}}/agendamentos/horarios-disponiveis?data=2025-09-23&servicoOferecidoId=1

### Listar horários disponíveis para Serviço 2 em 23/09/2025
GET {{baseUrl}}/agendamentos/horarios-disponiveis?data=2025-09-23&servicoOferecidoId=2

### ============================================================
### PROFISSIONAIS DISPONÍVEIS - Novos Endpoints
### ============================================================

### Listar profissionais disponíveis para Serviço 1 às 14:30 em 22/09/2025
GET {{baseUrl}}/agendamentos/profissionais-disponiveis?data=2025-09-22&horario=14:30&servicoOferecidoId=1

### Listar profissionais disponíveis para Serviço 2 às 15:00 em 22/09/2025
GET {{baseUrl}}/agendamentos/profissionais-disponiveis?data=2025-09-22&horario=15:00&servicoOferecidoId=2

### Listar profissionais disponíveis para Serviço 1 às 09:00 em 22/09/2025
GET {{baseUrl}}/agendamentos/profissionais-disponiveis?data=2025-09-22&horario=09:00&servicoOferecidoId=1

### Listar profissionais disponíveis para Serviço 2 às 10:30 em 22/09/2025
GET {{baseUrl}}/agendamentos/profissionais-disponiveis?data=2025-09-22&horario=10:30&servicoOferecidoId=2

### Listar profissionais disponíveis para Serviço 1 às 16:00 em 23/09/2025
GET {{baseUrl}}/agendamentos/profissionais-disponiveis?data=2025-09-23&horario=16:00&servicoOferecidoId=1

### Listar profissionais disponíveis para Serviço 2 às 17:30 em 23/09/2025
GET {{baseUrl}}/agendamentos/profissionais-disponiveis?data=2025-09-23&horario=17:30&servicoOferecidoId=2

### ============================================================
### FLUXO COMPLETO DE AGENDAMENTO EM DUAS ETAPAS
### ============================================================

### PASSO 1: Verificar horários disponíveis para corte de cabelo
GET {{baseUrl}}/agendamentos/horarios-disponiveis?data=2025-09-22&servicoOferecidoId=1

### PASSO 2: Verificar profissionais disponíveis às 14:00
GET {{baseUrl}}/agendamentos/profissionais-disponiveis?data=2025-09-24&horario=14:00&servicoOferecidoId=1

### PASSO 3: Criar agendamento com profissional escolhido
POST {{baseUrl}}/agendamentos/criar-agendamento
Content-Type: application/json

{
  "dataHora": "2025-09-22T14:00:00",
  "clienteId": "1",
  "profissionalId": "1",
  "servicoId": "1",
  "observacoes": "Agendamento via fluxo completo"
}

### ============================================================
### PRODUTOS
### ============================================================

### Cadastrar Produto
POST {{baseUrl}}/produtos/cadastrar
Content-Type: application/json

{
  "nome": "Shampoo Profissional",
  "preco": 45.90,
  "estoque": 50,
  "estoqueMinimo": 10
}

### Listar Produtos com Estoque Baixo
GET {{baseUrl}}/produtos/estoque-baixo

### Baixa Manual de Estoque
POST {{baseUrl}}/produtos/1

### ============================================================
### PDV (Ponto de Venda)
### ============================================================

### Registrar Venda - Produtos
POST {{baseUrl}}/pdv/vendas
Content-Type: application/json

{
  "clienteId": "1",
  "itens": [
    {
      "produtoId": "1",
      "descricao": "Shampoo Profissional",
      "quantidade": 1,
      "precoUnitario": 45.90,
      "tipo": "PRODUTO"
    }
  ],
  "observacoes": "Venda balcão"
}

### Registrar Venda - Serviços
POST {{baseUrl}}/pdv/vendas
Content-Type: application/json

{
  "clienteId": "550e8400-e29b-41d4-a716-446655440001",
  "itens": [
    {
      "servicoId": "550e8400-e29b-41d4-a716-446655440003",
      "descricao": "Corte de Cabelo",
      "quantidade": 1,
      "precoUnitario": 25.00,
      "tipo": "SERVICO"
    }
  ],
  "observacoes": "Serviços executados pelo Carlos"
}

### Registrar Venda Mista - Produtos + Serviços
POST {{baseUrl}}/pdv/vendas
Content-Type: application/json

{
  "clienteId": "550e8400-e29b-41d4-a716-446655440001",
  "itens": [
    {
      "servicoId": "550e8400-e29b-41d4-a716-446655440003",
      "descricao": "Corte de Cabelo",
      "quantidade": 1,
      "precoUnitario": 25.00,
      "tipo": "SERVICO"
    },
    {
      "produtoId": "550e8400-e29b-41d4-a716-446655440021",
      "descricao": "Cera para Cabelo",
      "quantidade": 1,
      "precoUnitario": 32.50,
      "tipo": "PRODUTO"
    }
  ],
  "observacoes": "Corte + produto finalização"
}

### ============================================================
### TESTES DE VALIDAÇÃO E CONFLITOS
### ============================================================

### Teste - Tentar criar agendamento no mesmo horário/profissional (deve falhar)
POST {{baseUrl}}/agendamentos/criar-agendamento
Content-Type: application/json

{
  "dataHora": "2025-09-22T14:30:00",
  "clienteId": "2",
  "profissionalId": "1",
  "servicoId": "1",
  "observacoes": "Teste de conflito de horário"
}

### Teste - Criar agendamento fora do horário de trabalho (deve falhar)
POST {{baseUrl}}/agendamentos/criar-agendamento
Content-Type: application/json

{
  "dataHora": "2025-09-22T07:00:00",
  "clienteId": "1",
  "profissionalId": "1",
  "servicoId": "1",
  "observacoes": "Teste antes do horário de funcionamento"
}

### Teste - Criar agendamento no horário de pausa (deve falhar)
POST {{baseUrl}}/agendamentos/criar-agendamento
Content-Type: application/json

{
  "dataHora": "2025-09-22T12:30:00",
  "clienteId": "1",
  "profissionalId": "1",
  "servicoId": "1",
  "observacoes": "Teste no horário de pausa"
}

### Teste - Buscar horários para data sem disponibilidade
GET {{baseUrl}}/agendamentos/horarios-disponiveis?data=2025-12-25&servicoOferecidoId=1

### Teste - Buscar profissionais para horário indisponível
GET {{baseUrl}}/agendamentos/profissionais-disponiveis?data=2025-09-22&horario=19:00&servicoOferecidoId=1

### Teste - Buscar horários para serviço inexistente (deve falhar)
GET {{baseUrl}}/agendamentos/horarios-disponiveis?data=2025-09-22&servicoOferecidoId=999

### Teste - Buscar profissionais para serviço inexistente (deve falhar)
GET {{baseUrl}}/agendamentos/profissionais-disponiveis?data=2025-09-22&horario=14:00&servicoOferecidoId=999

### ============================================================
### TESTES DE CENÁRIOS COMPLEXOS
### ============================================================

### Cenário 1: Múltiplos agendamentos no mesmo dia
POST {{baseUrl}}/agendamentos/criar-agendamento
Content-Type: application/json

{
  "dataHora": "2025-09-25T09:00:00",
  "clienteId": "1",
  "profissionalId": "1",
  "servicoId": "1",
  "observacoes": "Primeiro agendamento do dia"
}

### Cenário 2: Agendamento seguido (30 min depois)
POST {{baseUrl}}/agendamentos/criar-agendamento
Content-Type: application/json

{
  "dataHora": "2025-09-25T09:30:00",
  "clienteId": "2",
  "profissionalId": "1",
  "servicoId": "2",
  "observacoes": "Segundo agendamento seguido"
}

### Cenário 3: Agendamento com outro profissional no mesmo horário
POST {{baseUrl}}/agendamentos/criar-agendamento
Content-Type: application/json

{
  "dataHora": "2025-09-25T09:00:00",
  "clienteId": "3",
  "profissionalId": "2",
  "servicoId": "1",
  "observacoes": "Mesmo horário, profissional diferente"
}

### Verificar horários disponíveis após os agendamentos
GET {{baseUrl}}/agendamentos/horarios-disponiveis?data=2025-09-25&servicoOferecidoId=1

### Verificar profissionais disponíveis às 09:00 após agendamentos
GET {{baseUrl}}/agendamentos/profissionais-disponiveis?data=2025-09-25&horario=09:00&servicoOferecidoId=1

### Verificar profissionais disponíveis às 10:00 (horário livre)
GET {{baseUrl}}/agendamentos/profissionais-disponiveis?data=2025-09-25&horario=10:00&servicoOferecidoId=1
