--------- SUBDOMÍNIO: Agendamento de Serviços na Barbearia ---------

Como cliente ou recepcionista,
Eu quero agendar, confirmar e cancelar horários,
Para garantir que os profissionais e clientes tenham seus compromissos organizados.

CENÁRIO: Realizar um agendamento com sucesso em um horário disponível
    DADO que existe um profissional chamado "João Barbeiro"
    E a jornada de trabalho de "João Barbeiro" é das 09:00 às 18:00
    E existe um serviço "Corte de Cabelo" com duração de 30 minutos
    E o profissional "João Barbeiro" realiza o serviço "Corte de Cabelo"
    E o horário das 10:00 do dia "2025-09-15" para "João Barbeiro" está livre
    QUANDO um cliente agenda o serviço "Corte de Cabelo" com "João Barbeiro" às 10:00 do dia "2025-09-15"
    ENTAO um agendamento deve ser criado com o status "Pendente"
    E o horário das 10:00 às 10:30 do dia "2025-09-15" para "João Barbeiro" deve ser marcado como ocupado

CENÁRIO: Tentativa de agendamento em horário já ocupado (conflito)
    DADO que "João Barbeiro" já possui um agendamento de "Corte de Cabelo" às 14:00 do dia "2025-09-15"
    QUANDO outro cliente tenta agendar o serviço "Corte de Cabelo" com "João Barbeiro" às 14:00 do dia "2025-09-15"
    ENTAO o sistema deve retornar um erro de "Conflito de Horário"
    E nenhum novo agendamento deve ser criado

CENÁRIO: Tentativa de agendamento fora da jornada de trabalho
    DADO que existe um profissional chamado "João Barbeiro"
    E a jornada de trabalho de "João Barbeiro" é das 09:00 às 18:00
    QUANDO um cliente tenta agendar o serviço "Corte de Cabelo" com "João Barbeiro" às 20:00 do dia "2025-09-15"
    ENTAO o sistema deve retornar um erro informando que o horário está fora da jornada de trabalho

CENÁRIO: Cancelar um agendamento dentro do prazo permitido
    DADO que a regra de cancelamento exige uma antecedência de 2 horas
    E existe um agendamento para "2025-10-20" às 15:00
    QUANDO o cliente cancela este agendamento no dia "2025-10-20" às 11:00
    ENTAO o status do agendamento deve ser alterado para "Cancelado"
    E o horário das 15:00 deve voltar a ficar disponível

CENÁRIO: Tentativa de cancelar um agendamento fora do prazo permitido
    DADO que a regra de cancelamento exige uma antecedência de 2 horas
    E existe um agendamento para "2025-10-20" às 15:00
    QUANDO o cliente tenta cancelar este agendamento no dia "2025-10-20" às 13:30
    ENTAO o sistema deve retornar um erro informando que o prazo para cancelamento expirou
    E o status do agendamento deve permanecer "Confirmado"

--------- SUBDOMÍNIO: Contexto de Profissionais e Serviços ---------

Como administrador do sistema,
Eu quero cadastrar profissionais, serviços e suas configurações de horário,
Para que eles estejam disponíveis para agendamento.

CENÁRIO: Cadastrar um novo serviço com preço e duração
    QUANDO o administrador cadastra um novo serviço chamado "Barba Terapia"
    E define sua duração como 45 minutos
    E define seu preço como 50.00
    ENTAO o serviço "Barba Terapia" deve estar disponível no sistema com os detalhes corretos

CENÁRIO: Associar um serviço a um profissional
    DADO que existe um profissional chamado "Pedro Navalha"
    E existe um serviço chamado "Corte e Barba"
    QUANDO o administrador associa o serviço "Corte e Barba" ao profissional "Pedro Navalha"
    ENTAO "Pedro Navalha" deve ser listado como apto a realizar o serviço "Corte e Barba"

CENÁRIO: Definir a configuração de horário de um profissional
    DADO que o horário de funcionamento da barbearia é das 08:00 às 20:00
    E existe um profissional chamado "Carlos Tesoura"
    QUANDO o administrador define a jornada de trabalho de "Carlos Tesoura" para ser de Terça a Sábado, das 10:00 às 19:00, com pausa para almoço das 13:00 às 14:00
    ENTAO a disponibilidade de "Carlos Tesoura" para agendamentos deve refletir essa jornada

--------- SUBDOMÍNIO: Programa de Fidelidade e Histórico do Cliente ---------

Como gestor de marketing,
Eu quero recompensar clientes fiéis com pontos que podem ser trocados por vouchers,
Para incentivar o retorno deles à barbearia.

CENÁRIO: Cliente ganha pontos após um agendamento concluído
    DADO que existe um cliente chamado "Fernando" com 80 pontos de fidelidade
    E o sistema concede 10 pontos a cada agendamento concluído
    E "Fernando" tem um agendamento de "Corte de Cabelo"
    QUANDO o status desse agendamento é alterado para "Concluído"
    ENTAO o saldo de pontos de fidelidade de "Fernando" deve ser de 90 pontos
    E o agendamento concluído deve ser adicionado ao seu histórico de cliente

CENÁRIO: Cliente resgata uma recompensa com pontos suficientes
    DADO que existe um cliente chamado "Marcelo" com 120 pontos de fidelidade
    E um "Voucher de Desconto de R$10" pode ser resgatado com 100 pontos
    QUANDO "Marcelo" resgata um "Voucher de Desconto de R$10"
    ENTAO o saldo de pontos de "Marcelo" deve ser debitado para 20 pontos
    E um voucher válido deve ser emitido para ele

CENÁRIO: Cliente tenta resgatar uma recompensa sem pontos suficientes
    DADO que existe um cliente chamado "Fernando" com 90 pontos de fidelidade
    E um "Voucher de Desconto de R$10" pode ser resgatado com 100 pontos
    QUANDO "Fernando" tenta resgatar um "Voucher de Desconto de R$10"
    ENTAO o sistema deve exibir uma mensagem de "Pontos insuficientes"
    E o saldo de pontos de "Fernando" deve permanecer 90

--------- SUBDOMÍNIO: Vendas e Estoque ---------

Como recepcionista ou gerente,
Eu quero registrar a venda de produtos e pagamentos de serviços,
Para manter o controle financeiro e de estoque.

CENÁRIO: Venda de um produto com baixa no estoque
    DADO que existe um produto chamado "Pomada Modeladora" com 50 unidades em estoque e preço de 30,00
    QUANDO um cliente compra 2 unidades do produto "Pomada Modeladora"
    ENTAO o estoque do produto "Pomada Modeladora" deve ser atualizado para 48 unidades
    E uma venda deve ser registrada no valor total de 60,00
    E um registro de pagamento para essa venda deve ser criado

CENÁRIO: Registro de pagamento de um serviço concluído
    DADO que existe um agendamento concluído para o serviço "Barba Terapia" com o valor de 50,00
    QUANDO o pagamento para este serviço é processado
    ENTAO uma venda referente ao serviço deve ser registrada no valor de 50,00
    E um registro de pagamento associado a essa venda deve ser criado

CENÁRIO: Venda de múltiplos produtos e um serviço na mesma transação
    DADO que existe um agendamento concluído para o serviço "Corte de Cabelo" no valor de 40,00
    E existe um produto chamado "Shampoo Anti-queda" com 20 unidades em estoque e preço de 35,00
    QUANDO o cliente paga pelo serviço "Corte de Cabelo" e também compra 1 unidade do produto "Shampoo Anti-queda"
    ENTAO o estoque do produto "Shampoo Anti-queda" deve ser atualizado para 19 unidades
    E uma única venda deve ser registrada com o valor total de 75,00
    E essa venda deve conter tanto o serviço quanto o produto como itens
    E um registro de pagamento para a venda total deve ser criado